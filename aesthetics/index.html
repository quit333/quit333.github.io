<!DOCTYPE html>
<html lang="en-US" dir="ltr">
	<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>Aesthetics | — QUIT3 —</title>

<link rel="canonical" href="http://localhost:1313/">
<link rel='alternate' type='application/rss+xml' title="— QUIT3 — RSS" href='/index.xml'>
<link rel="icon" href="/favicon.ico">
<meta name="description" content="

">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index, follow">
<meta charset="utf-8">


    <link rel="stylesheet" href="/css/main.css">


      <script src="/js/main.js"></script>




	</head>
	<body>
		<header>
			<h1>— QUIT3 —</h1>

  <nav>
  
    
      <a href="/">Home</a>
    
      <a aria-current="page" class="active" href="/aesthetics/">Aesthetics</a>
  </nav>


		</header>
		<main>
			
<article>
	<div class="gallery" id="gallery">
</div>
<script>
let page = 0;
let imageList = [];

window.addEventListener("load", () => {
    const article = document.querySelector("article");
    const gallery = document.getElementById("gallery");

    fetch("../aesthetics/links.json").then(res => res.json()).then(data => {
            imageList = data;
            onFetchedImages();
    });

    function fillGaps() {
        const items = gallery.querySelectorAll('.gallery-item');
        const gridComputedStyle = window.getComputedStyle(gallery);
        const rowGap = parseInt(gridComputedStyle.rowGap);
        
        items.forEach(item => {
            const img = item.querySelector('img');
            if (!img.complete) return;
            
            const itemHeight = img.offsetHeight;
            const gridRowHeight = rowGap; // Small grid row size
            const rowSpan = Math.ceil(itemHeight / gridRowHeight);
            
            item.style.gridRowEnd = `span ${rowSpan}`;
        });
    }

    function addMoreImages(){
        const start = page * 5;
        const end = start + 5
        const currentImages = imageList.slice(start, end);

        currentImages.forEach(imgName => {
            const img = document.createElement("img");
            img.src = `${imgName}`;

            const item = document.createElement("div");
            item.className = "gallery-item";
            item.appendChild(img);

            img.onload = () => {
                fillGaps();
            };
            
            gallery.appendChild(item);
        });
        page++;
    }

    function onFetchedImages(){
        if (article.scrollHeight <= article.clientHeight + 500) {
            addMoreImages();
            setTimeout(onFetchedImages, 100);
        }
    }

    article.addEventListener('scroll', () => {
        if (article.scrollTop >= article.scrollHeight - article.clientHeight) {
            addMoreImages();
        }
    });

    window.addEventListener('resize', () => {
        fillGaps();
    });
});
</script>

</article>


			<div><hr></div>

			<footer>
				<a target="_blank" href="https://x.com/mureinoki">無霊の木</a>

			</footer>
		</main>
	</body>
</html>
