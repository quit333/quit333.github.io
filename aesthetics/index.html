<!DOCTYPE html>
<html lang="en-US" dir="ltr">
	<head>
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>Aesthetics | — QUIT3 —</title>

<link rel="canonical" href="https://quit333.github.io/">
<link rel='alternate' type='application/rss+xml' title="— QUIT3 — RSS" href='/index.xml'>
<link rel="icon" href="/favicon.ico">
<meta name="description" content="
">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index, follow">
<meta charset="utf-8">


      <link rel="stylesheet" href="/css/main.min.91586142ea003ed62d1103c07ee29c0ff2334ff3ec7e3ef55702d083f8a91594.css" integrity="sha256-kVhhQuoAPtYtEQPAfuKcD/IzT/Psfj71VwLQg/ipFZQ=" crossorigin="anonymous">


      <script src="/js/main.f2979a93a325fecf9605263bd141398a311c8e23388ed7dcff74f92f7e632866.js" integrity="sha256-8peak6Ml/s&#43;WBSY70UE5ijEcjiM4jtfc/3T5L35jKGY=" crossorigin="anonymous"></script>




	</head>
	<body>
		<header>
			<h1>— QUIT3 —</h1>

  <nav>
  
    
      <a href="/">Home</a>
    
      <a aria-current="page" class="active" href="/aesthetics/">Aesthetics</a>
  </nav>


		</header>
		<main>
			
<article>
	<div class="gallery" id="gallery"></div>
<script>
window.addEventListener("load", () => {
    // Constants.
    const article = document.querySelector("article");
    const gallery = document.getElementById("gallery");

    // Variables.
    let page = 0;
    let mediaList = [];
    let gridComputedStyle = window.getComputedStyle(gallery);
    let rowGap = parseInt(gridComputedStyle.rowGap);
    let columnGap = parseInt(gridComputedStyle.columnGap);
   
    // Calls onStart function after loading gallery's media index.
    fetch("../aesthetics/media.json").then(res => res.json()).then(data => {
            mediaList = data;
            onStart();
    });

    // On start.
    function onStart(){
        // Adds more media until overflow enables scrolling.
        if (article.scrollHeight <= article.clientHeight + 200){
            addMoreMedia();
            setTimeout(onStart, 100);
        }
    }

    // Handles how different types of media are loaded.
    function addMoreMedia(){
        const start = page * 5;
        const end = start + 5
        const currentMedia = mediaList.slice(start, end);

        currentMedia.forEach(mediaItem => {
            if ([".jpg", ".jpeg", ".png", ".webp"].some(ext => mediaItem.toLowerCase().endsWith(ext))){
                const img = document.createElement("img");
                const imgName = mediaItem;
                const imgBaseName = `${imgName.split('.').slice(0, -1)}`;
                img.src = `https://raw.githubusercontent.com/quit333/quit3-backup/refs/heads/master/aesthetics/thumbnails/${imgBaseName}.webp`

                const link = document.createElement("a");
                link.href = `https://raw.githubusercontent.com/quit333/quit3-backup/refs/heads/master/aesthetics/images/${imgName}` 
                link.target = "_blank";
                link.rel = "noopener noreferrer"; 
                link.appendChild(img);

                img.addEventListener("load", () => createGalleryItem(link)) 
            }
            else if (mediaItem.toLowerCase().endsWith(".gif")){
                const img = document.createElement("img");
                img.src = `https://raw.githubusercontent.com/quit333/quit3-backup/refs/heads/master/aesthetics/videos/${mediaItem}`

                const link = document.createElement("a");
                link.href = `https://raw.githubusercontent.com/quit333/quit3-backup/refs/heads/master/aesthetics/videos/${mediaItem}` 
                link.target = "_blank";
                link.rel = "noopener noreferrer"; 
                link.appendChild(img);

                img.addEventListener("load", () => createGalleryItem(link)) 
            }
        else if ( mediaItem.toLowerCase().startsWith("http") || ["mp4", "webm"].some(ext => mediaItem.toLowerCase().endsWith(ext))
        ){
            const video = document.createElement("video");
            video.autoplay = true;
            video.loop = true;
            video.muted = true;

            const isDirectUrl = mediaItem.toLowerCase().startsWith("http");
            const src = isDirectUrl
                ? mediaItem
                : `https://raw.githubusercontent.com/quit333/quit3-backup/refs/heads/master/aesthetics/videos/${mediaItem}`;

            const source = document.createElement("source");
            source.src = src;
            video.appendChild(source);

            const link = document.createElement("a");
            link.href = src;
            link.target = "_blank";
            link.rel = "noopener noreferrer";
            link.appendChild(video);

            video.addEventListener("loadeddata", () => createGalleryItem(link));
            }
        });
        page++;
    }

    // Creates a gallery and sets its height.
    function createGalleryItem(media){
        const item = document.createElement("div");
        item.className = "gallery-item";
        item.appendChild(media);
        gallery.appendChild(item);
        setItemHeight(item);
    }

    // Sets the item's height accordingly to the current gallery size.
    function setItemHeight(item){
        const media = item.querySelector('img, video');

        // Stops the height calculation if the media hasn't loaded completely. 
        if (!media) return;
        if (media.tagName === "IMG" && !media.complete) return;
        if (media.tagName === "VIDEO" && media.readyState < 3) return;
        
        // Calculates the height in terms of column-gap-sized row spans.
        const itemHeight = media.clientHeight;
        const gridRowHeight = columnGap;
        const rowSpan = Math.round(itemHeight / gridRowHeight);
        
        item.style.gridRowEnd = `span ${rowSpan}`;
    }

    // Adds more media once you scroll to the bottom.
    article.addEventListener('scroll', () => {
        if (article.scrollTop >= article.scrollHeight - article.clientHeight - 500) {
            addMoreMedia();
        }
    });

    // Recalculates each item's height on windows resize.
    window.addEventListener('resize', () => {
        const items = gallery.querySelectorAll('.gallery-item');

        // Gallery's column change responsively.
        gridComputedStyle = window.getComputedStyle(gallery); 
        rowGap = parseInt(gridComputedStyle.rowGap);
        columnGap = parseInt(gridComputedStyle.columnGap);

        items.forEach(item => {
            setItemHeight(item);
        });
    });
});
</script>

</article>


			<div><hr></div>

			<footer>
				<a target="_blank" href="https://x.com/mureinoki">無霊の木</a>

			</footer>
		</main>
	</body>
</html>
